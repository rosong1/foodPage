(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([[0],{"0lfv":function(e,t,a){"use strict";a.d(t,"a",function(){return d}),a.d(t,"e",function(){return m}),a.d(t,"f",function(){return u}),a.d(t,"h",function(){return p}),a.d(t,"b",function(){return h}),a.d(t,"j",function(){return b}),a.d(t,"g",function(){return v}),a.d(t,"i",function(){return g}),a.d(t,"d",function(){return y}),a.d(t,"c",function(){return E});var r=a("mwIZ"),l=a.n(r),n=a("UfWW"),o=a.n(n),s=a("xkGU"),i=a.n(s),c=a("jxKE"),d=e=>{var t=new Date(Number(e)),a=e=>e<10?`0${e}`:e;return`${a(t.getHours())}:${a(t.getMinutes())}`};function m(e,t){if(void 0===t)try{return JSON.parse(localStorage.getItem(e))}catch(t){return localStorage.getItem(e)}try{return localStorage.setItem(e,JSON.stringify(t))}catch(a){return localStorage.setItem(e,t)}}var u=()=>{var e="-",t=Math.random().toString(36).substr(2);return`${t}${e}${(new Date).getTime()}`},p=function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(t)return m(c["e"].bookingOrder,e);var a=m(c["e"].bookingOrder)||[];a.push(e),m(c["e"].bookingOrder,a)};function h(e){var t=m(c["e"].bookingOrder)||[];return"string"===typeof e?t.filter(t=>t.id===e)[0]:Array.isArray(e)?t.filter(t=>e.includes(t.id)):t}function b(e){var t=m(c["e"].bookingOrder)||[];if(Array.isArray(e))return i()(e,e=>{var a=o()(t,t=>t.id===e.id);t[a]=e}),p(t,!0);var a=t.map(t=>t.id===e.id?e:t);p(a,!0)}function f(e,t){var a=e.matches||e.webkitMatchesSelector||e.mozMatchesSelector||e.msMatchesSelector;while(e){if(a.call(e,t))return e;e=e.parentElement}return null}function v(e){if(/iPhone|iPod|iPad/i.test(navigator.userAgent)){var t=f(e.target,".am-modal-content");t||e.preventDefault()}}var g=e=>({0:"",1:"\ud83c\udf36\ufe0f",2:"\ud83c\udf36\ufe0f\ud83c\udf36\ufe0f",3:"\ud83c\udf36\ufe0f\ud83c\udf36\ufe0f\ud83c\udf36\ufe0f"})[e];function y(e){return"\u9152\u996e"===l()(e,"menuType")||-1!==l()(e,"label","").indexOf("\u9152")}function E(e){return!(void 0===e||e===c["a"])}},"1Ymt":function(e,t,a){},"31/t":function(e,t,a){},"3R4e":function(e,t,a){},"4AHY":function(e,t,a){},"8It1":function(e,t,a){},BSQ0:function(e,t,a){"use strict";a.r(t),a.d(t,"default",function(){return d});var r=a("q1tI"),l=a.n(r),n=(a("MEdo"),function(e,t){var a={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(a[r]=e[r]);if(null!=e&&"function"===typeof Object.getOwnPropertySymbols){var l=0;for(r=Object.getOwnPropertySymbols(e);l<r.length;l++)t.indexOf(r[l])<0&&(a[r[l]]=e[r[l]])}return a}),o=500,s=50,i=0,c=10;function d(e){return class extends l.a.Component{constructor(){super(...arguments),this.tempDom=null,this.START_TIMER=null,this.LONG_PRESS_TIMER=null,this.reset=(()=>{i=0,clearTimeout(this.START_TIMER),clearInterval(this.LONG_PRESS_TIMER),setTimeout(()=>{this.tempDom&&this.tempDom.classList.remove("bg-gray")},1e3/60)}),this.onTouchStart=(e=>{e.preventDefault(),this.START_TIMER=setTimeout(()=>{this.longPress(e)},o)}),this.addClass=(()=>{this.tempDom&&this.tempDom.classList.add("bg-gray")}),this.longPress=(e=>{clearInterval(this.LONG_PRESS_TIMER);var t=()=>{++i,i>=c&&this.reset(),this.props.onLongPress&&this.props.onLongPress(e)?this.addClass():this.reset()};this.LONG_PRESS_TIMER=setInterval(t,s)})}componentWillUnmount(){this.reset()}render(){var t=this.props,a=(t.onLongPress,n(t,["onLongPress"]));return l.a.createElement("div",{className:"longpress-wrapper",ref:e=>this.tempDom=e,onTouchStart:this.onTouchStart,onTouchEnd:this.reset,onTouchMove:this.reset,onTouchCancel:this.reset,onClick:this.addClass},l.a.createElement(e,Object.assign({},a)))}}}},C3Sm:function(e,t,a){"use strict";a.r(t);a("5aHp");var r=a("dzEL"),l=(a("ufv1"),a("QYgq")),n=(a("XCdk"),a("b+ud")),o=(a("Dkba"),a("UYM3")),s=(a("puyI"),a("xZH1")),i=(a("D2jH"),a("2ROE")),c=(a("Hwc6"),a("krix")),d=(a("XGli"),a("NHyu")),m=(a("e3Tq"),a("n+tp")),u=a("BJ98"),p=a.n(u),h=a("xweI"),b=a.n(h),f=a("xkGU"),v=a.n(f),g=a("UfWW"),y=a.n(g),E=a("3WF5"),N=a.n(E),C=a("0YDr"),k=a.n(C),O=a("E+oP"),I=a.n(O),L=a("q1tI"),M=a.n(L),j=a("MuoO"),T=(a("mhwC"),a("B8GA"),a("8dL9")),D=(a("ufuw"),a("Sth4")),x=a("jxKE"),S=a("0lfv"),w=e=>({0:"",1:"\u5df2\u7ed3\u8d26"})[e];class P extends M.a.Component{constructor(e){super(e),this.getCls=(()=>{var e=this.props,t=e.data.orderList,a=e.selected,r=[];return t||r.push("empty"),a&&r.push("bg-light-theme5 selected"),r.join(" ")}),this.onClick=(e=>{var t=this.props,a=t.idx,r=t.data;this.props.onClick&&this.props.onClick(a,r,e)}),this.isServing=(e=>e.status==x["c"].checked||e.status==x["c"].completed),this.hasNotServingFood=(e=>e.some(e=>!this.isServing(e))),this.calcNotServingCount=(e=>{if(I()(e.foods))return 0;var t=0;return v()(e.foods,e=>{if(I()(e.count))return!0;this.hasNotServingFood(e.count)&&!Object(S["d"])(e)&&(t+=1)}),t}),this.renderMoneyWrapper=(e=>{return Object(S["c"])(e.realMoney)&&e.realMoney!==e.totalMoney?M.a.createElement("div",null,M.a.createElement(D["a"],{value:e.totalMoney,className:"red text-delete"}),M.a.createElement(D["a"],{value:e.realMoney,className:"red"})):M.a.createElement("div",null,M.a.createElement(D["a"],{value:e.totalMoney,className:"red"}))})}render(){var e=this.props.data;if(!e)return null;var t=this.props.data,a=t.label,r=void 0===a?"":a,l=t.status,n=t.remark,o=void 0===n?"":n,s=t.isPack,i=this.calcNotServingCount(e);return M.a.createElement(T["a"],{text:s?"\u6253\u5305":"",corner:!0,className:"table-card-badge"},M.a.createElement("div",{className:`table-card-wrapper ${this.getCls()}`,onClick:this.onClick},M.a.createElement("div",null,M.a.createElement("div",{className:"card-top"},M.a.createElement("div",null,M.a.createElement("h3",{className:"card-title"},r," ",i?M.a.createElement(T["a"],{text:i,className:"card-title-badge"}):null)),this.renderMoneyWrapper(e)),l==x["g"].paid?M.a.createElement("p",{className:"card-status red"},w(l)):null,o&&M.a.createElement("div",{className:"card-bottom"},M.a.createElement("p",{className:"card-text gray"},o)))))}}var A=M.a.memo(P),R=(a("1Ymt"),a("eNPU"),a("BSQ0")),z=function(e,t){var a={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(a[r]=e[r]);if(null!=e&&"function"===typeof Object.getOwnPropertySymbols){var l=0;for(r=Object.getOwnPropertySymbols(e);l<r.length;l++)t.indexOf(r[l])<0&&(a[r[l]]=e[r[l]])}return a},F=e=>{e.children;var t=e.className,a=void 0===t?"":t,r=(e.onLongPress,z(e,["children","className","onLongPress"]));return M.a.createElement("button",Object.assign({className:`btn ${a||""}`},r),e.children)},H=(M.a.memo(Object(R["default"])(F)),{backgroundColor:"#ccc",color:"#fff"}),Q={backgroundColor:"#fff"},B={backgroundColor:"#fff"},Y={backgroundColor:"#fff"},W=[H,Q,B,Y];class Z extends M.a.Component{constructor(e){var t;super(e),t=this,this.onClick=(e=>{this.props.onClick&&this.props.onClick(this.props.data,e)}),this.handleLabelClick=(e=>{e.preventDefault(),e.stopPropagation(),this.props.labelClick(this.props.tableData,!0)}),this.handleBadgeClick=(e=>{e.preventDefault(),e.stopPropagation();var t=this.state.badgeStatus<W.length-1?this.state.badgeStatus+1:0;this.setState({badgeStatus:t})}),this.renderLabel=(()=>{var e,t=this.props,a=t.tradeType,r=t.data;t.tableData;return"booking"===a?M.a.createElement("div",{className:"label"},r.label):"tableNo"===a?M.a.createElement("div",{className:"label"},M.a.createElement("span",{className:`label-text ${this.hasNotServingFood(r.count)&&!Object(S["d"])(r)?"red":""}`},r.label),M.a.createElement(T["a"],{text:`${Object(S["i"])(r.taste||"0")}`,style:e,onClick:this.handleBadgeClick})):null}),this.calcMoney=(e=>{var t=e=>{return Array.isArray(e)?k()(e.map(e=>e.value)):e};return Number(e.price)*t(e.count)}),this.getRenderCount=((e,a)=>{var r=e=>e.value>0?`+${e.value}`:`${e.value}`,l=function(e){var l=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return Object(S["d"])(a)||t.isServing(e)?r(e):M.a.createElement("span",{className:"red",key:l},r(e))};return Array.isArray(e)?e.filter(e=>0!==e.value).map(l):`+${e}`}),this.isServing=(e=>e.status==x["c"].checked||e.status==x["c"].completed),this.hasNotServingFood=(e=>e.some(e=>!this.isServing(e))),this.state={isActive:!1,isHot:!1,badgeStatus:0}}render(){var e=this.props,t=e.data,a=e.tradeType;return t&&t.count?M.a.createElement("div",{className:`order-card-wrapper ${a} `,onClick:this.onClick},M.a.createElement("div",{className:"order-card-left"},this.renderLabel(),M.a.createElement("div",{className:"count"},this.getRenderCount(t.count,t))),M.a.createElement(D["a"],{value:this.calcMoney(t)})):null}}Z.defaultProps={tradeType:"booking"};var G,$=M.a.memo(Object(R["default"])(Z)),q=a("tmn2"),U=a("zPXH"),J=a("g0q0"),V=function(e,t,a,r){var l,n=arguments.length,o=n<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,a):r;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)o=Reflect.decorate(e,t,a,r);else for(var s=e.length-1;s>=0;s--)(l=e[s])&&(o=(n<3?l(o):n>3?l(t,a,o):l(t,a))||o);return n>3&&o&&Object.defineProperty(t,a,o),o},K=Object(J["a"])(),X=a("NCsZ"),_=a("dtKn"),ee=a("jasq"),te=new RegExp("\\biPhone\\b|\\biPod\\b","i").test(window.navigator.userAgent);te&&(G={onTouchStart:e=>e.preventDefault()});var ae=class extends L["Component"]{constructor(e){super(e),this.moneyInput=M.a.createRef(),this.init=(()=>{this.props.dispatch({type:"tableno/fetchTableList"})}),this.setSelectIdx=(e=>{this.props.dispatch({type:"tableno/setSelectIdx",payload:{seletedIdx:e}})}),this.setModelData=(e=>{this.props.dispatch({type:"tableno/setModelData",payload:e})}),this.increFood=((e,t)=>{return this.props.dispatch({type:"tableno/increFood",payload:{food:e,tableLabel:t}}),!0}),this.decreFood=((e,t)=>{this.props.dispatch({type:"tableno/decreFood",payload:{food:e,tableLabel:t}})}),this.clickForOrderCard=((e,t,a)=>{return e.editing===x["f"].incre?this.increFood(t,a):e.editing===x["f"].decre&&this.decreFood(t,a)}),this.editComfirm=(e=>{if(!e.tempOrderList||I()(e.tempOrderList))return this.setEditing(e,x["f"].disable);var t=e=>e.price*e.count,a=e=>k()(e.map(t)),r=Object(S["f"])(),l={id:r,isPack:e.isPack,label:e.label||"",orderList:e.tempOrderList,remark:"",tableNo:e.tableNo,taste:e.taste,totalMoney:a(e.tempOrderList),orderTime:(new Date).getTime(),from:x["b"].tableNo};Object(S["h"])(l),this.props.dispatch({type:"tableno/updateTableList",payload:{tableData:Object.assign({},e,{tempOrderList:[],editing:x["f"].disable})}}),this.props.dispatch({type:"tableno/fetchTableList"})}),this.renderDetail=(e=>{var t=e.foods,a=void 0===t?{}:t;if(I()(a))return M.a.createElement(re,{tableData:e,dispatch:this.props.dispatch});var r=e=>!e||I()(e),l=(e,t)=>{return r(e)?t:N()(t,t=>{var a=y()(e,e=>t.value===e.value);return-1===a?t:Object.assign({},t,{count:[...t.count,{value:e[a].count,from:"temp"}]})})},n=e=>{var t=e=>{if(Object(S["d"])(e))return 0;var t=0,a=e=>e.status==x["c"].checked||e.status==x["c"].completed;return v()(e.count,e=>{a(e)||"temp"===e.from||(t-=1)}),t};return b()(e,[t])},o=n(l(e.tempOrderList,Object.values(a))),s=e=>e.map(e=>e.value),i=t=>t.map(t=>M.a.createElement($,{tradeType:"tableNo",data:t,key:t.label,tableData:e,onClick:()=>this.clickForOrderCard(e,t,e.label),onLongPress:()=>this.clickForOrderCard(e,t,e.label)})),c=p()([k.a,s]),u=e=>e.price*c(e.count),h=e=>{return k()(e.map(u))};return M.a.createElement(M.a.Fragment,null,M.a.createElement(m["a"],null,M.a.createElement("div",{className:"tableno-order-list-wrapper"},M.a.createElement(le,{onClick:()=>this.editComfirm(e),isActive:[x["f"].incre,x["f"].decre].includes(e.editing)}),M.a.createElement(le,{className:"incre",onClick:()=>this.setEditing(e,x["f"].incre),isActive:e.editing===x["f"].incre,forceClick:!0},M.a.createElement("img",{src:_,className:"am-icon am-icon-lg",alt:""})),M.a.createElement(le,{className:"decre",onClick:()=>this.setEditing(e,x["f"].decre),isActive:e.editing===x["f"].decre,forceClick:!0},M.a.createElement("img",{src:ee,className:"am-icon am-icon-lg",alt:""})),i(o)),M.a.createElement(m["a"].Item,null,M.a.createElement(d["a"],{type:"primary",onClick:()=>{this.editComfirm(e),this.props.dispatch({type:"booking/reset"});var t={tableNo:e.tableNo,isPack:e.isPack,taste:e.taste,foodSelectModal:!0,isIncre:!0};this.props.dispatch({type:"booking/setOrderInfo",payload:t}),this.props.dispatch({type:"home/setHomeTab",payload:{tabIndex:x["d"].booking}})}},M.a.createElement("div",{className:"btn-text"},"+"))),M.a.createElement(m["a"].Item,null,M.a.createElement("div",{className:"total-money-wrapper"},M.a.createElement("div",{className:"total-money-wrapper"},"\u603b\u8ba1 ",M.a.createElement(D["a"],{value:h(o),className:"red"})),Object(S["c"])(e.realMoney)&&M.a.createElement("div",{className:"total-money-wrapper"},"\u5b9e\u6536 ",M.a.createElement(D["a"],{value:e.realMoney,className:"red"})))),M.a.createElement(m["a"].Item,null,M.a.createElement(d["a"],{type:"warning",onClick:()=>this.isPaid?this.payMoney(e,x["a"]):this.setState({moneyModal:!0})},this.isPaid?"\u53d6\u6d88\u7ed3\u8d26":"\u7ed3\u8d26"),M.a.createElement(se,{inputRef:this.moneyInput,curTableData:e,isShow:this.state.moneyModal,onClose:()=>this.setState({moneyModal:!1}),doComfirm:()=>{var t=Number(this.moneyInput.current.state.value);this.setState({moneyModal:!1}),this.payMoney(e,t)}})),M.a.createElement(m["a"].Item,null,M.a.createElement(d["a"],{type:"ghost",disabled:!this.isPaid,onClick:()=>this.leave(e)},"\u7ffb\u53f0"))),M.a.createElement(ne,{dispatch:this.props.dispatch,isShow:this.props.tableno.editModal,curTableData:e,onClose:()=>this.setModelData({editModal:!1}),tablenoList:this.props.tableno.tableList}),M.a.createElement(oe,{curTableData:e,isShow:this.state.detailModal,onClose:()=>this.setState({detailModal:!1})}))}),this.payMoney=((e,t)=>{this.props.dispatch({type:"tableno/payMoney",payload:{tableData:e,realMoney:t}})}),this.leave=(e=>{this.props.dispatch({type:"tableno/leave",payload:{tableData:e}})}),this.setEditing=((e,t)=>{var a=Object.assign({},e,{editing:t});this.props.dispatch({type:"tableno/updateTableList",payload:{tableData:a}})}),this.state={editModal:!1,detailModal:!1,moneyModal:!1}}componentDidMount(){this.init()}render(){var e=this.props.tableno,t=e.seletedIdx,a=e.tableList,r=this.curTableData;console.error("curData",r);var l=document.documentElement.clientHeight;return M.a.createElement("div",{className:"home-wrapper tableno",style:{minHeight:.9*l}},M.a.createElement("div",{className:"home-left",style:{maxHeight:.9*l,overflowY:"scroll"}},M.a.createElement("div",{className:"header-wrapper"},M.a.createElement("h2",null,"\u53f0\u53f7")),a.map((e,a)=>M.a.createElement(A,{onClick:this.setSelectIdx,data:e,selected:a===t,idx:a,key:e.id||e.value}))),M.a.createElement("div",{className:"home-right bg-gray5",style:{maxHeight:.9*l,overflowY:"scroll"}},M.a.createElement("div",{className:"header-wrapper"},M.a.createElement("h2",{onClick:()=>this.setState({detailModal:!0})},"\u8be6\u60c5"),r&&r.id&&M.a.createElement("div",{className:"edit-btn",onClick:()=>this.setModelData({editModal:!0})},"\u270d\ufe0f")),r&&this.renderDetail(r)))}get curTableData(){var e=this.props.tableno,t=e.seletedIdx,a=e.tableList,r=a[t];return r}get isPaid(){return this.curTableData.status==x["g"].paid}};ae=V([Object(j["connect"])(e=>{var t=e.tableno,a=e.home,r=e.booking;return{tableno:t,home:a,booking:r}})],ae);var re=e=>{return M.a.createElement(m["a"],null,M.a.createElement(m["a"].Item,null,M.a.createElement(c["a"],{img:M.a.createElement(i["a"],{type:"cross-circle-o",className:"spe",style:{fill:"#F13642"}}),message:"\u8be5\u53f0\u4f4d\u8fd8\u6ca1\u70b9\u83dc\uff01"}),M.a.createElement(d["a"],{type:"primary",onClick:()=>{e.dispatch({type:"booking/reset"});var t={tableNo:e.tableData.value,isIncre:!0};e.dispatch({type:"booking/setOrderInfo",payload:t}),e.dispatch({type:"home/setHomeTab",payload:{tabIndex:x["d"].booking}})}},M.a.createElement("div",{className:"btn-text"},"+"))))},le=e=>{var t=e.isActive,a=void 0!==t&&t,r=e.className,l=void 0===r?"":r,n=e.children,o=e.forceClick,s=void 0!==o&&o,c=t=>{if(t.stopPropagation(),t.preventDefault(),!a&&!s)return null;e.onClick&&e.onClick()};return M.a.createElement("div",{className:`comfirm-btn ${a?"active":""} ${l}`,onClick:c},n||M.a.createElement(i["a"],{type:"check-circle",size:"lg",color:"#1890ff"}))},ne=e=>{var t=e.dispatch,a=e.isShow,r=e.curTableData,i=e.onClose,c=e.tablenoList,u=r.tempTableInfo,h=void 0===u?{}:u,b=function(e){var a=arguments.length>1&&void 0!==arguments[1]&&arguments[1],l=a?{}:Object.assign({},r.tempTableInfo,e);t({type:"tableno/updateTableList",payload:{tableData:Object.assign({},r,{tempTableInfo:l})}})},f=()=>{b({},!0),i&&i()},v=e=>e in h?h[e]:r[e],g=e=>{b({tableNo:e.value})},y=()=>{if(!I()(h)){var e=e=>e.map((e,t)=>0===t?Object.assign({},e,h):Object.assign({},e,h,{remark:""})),a=p()([S["j"],e,S["b"]]),l=e=>{t({type:"tableno/updateTableList",payload:{tableData:Object.assign({},e,{tempTableInfo:{}},h)}}),t({type:"tableno/fetchTableList"})};a(r.ids),l(r)}i&&i()};return M.a.createElement(s["a"],{className:"tableno-edit-modal",closable:!0,maskClosable:!1,visible:a,onClose:f,animationType:"slide-up"},M.a.createElement(m["a"],null,M.a.createElement(m["a"].Item,{extra:v("tableNo")||"\u8bf7\u9009\u62e9"},"\u53f0\u4f4d\u9009\u62e9"),M.a.createElement(q["a"],{currentTableNo:v("tableNo"),tableListWithStatic:K,tableListWithPeople:c,onClick:g,disable:!0}),M.a.createElement(m["a"].Item,{extra:M.a.createElement(o["a"],{checked:v("isPack"),onChange:e=>b({isPack:e})})},"\u6253\u5305"),M.a.createElement(m["a"].Item,null,M.a.createElement(U["a"],{tasteList:X,currentTaste:v("taste"),onClick:e=>b({taste:v("taste")===e.value?"":e.value})})),M.a.createElement(n["a"],{onChange:e=>b({remark:e}),title:"\u5907\u6ce8",clear:!0,autoHeight:!0,placeholder:"\u8bf7\u8f93\u5165\u5907\u6ce8",value:v("remark")})),M.a.createElement(l["a"],{size:"lg"}),M.a.createElement(m["a"].Item,null,M.a.createElement(d["a"],{type:"primary",onClick:y},"\u786e\u8ba4")))},oe=e=>{var t=e.curTableData,a=e.isShow,r=e.onClose;if(I()(t)||I()(t.foods))return null;var l=()=>{r&&r()},n=e=>k()(e.count.map(e=>e.value)),o=e=>e.price*n(e),i=e=>{var t=e.data;return M.a.createElement("tr",{key:t.label},M.a.createElement("td",null,t.label),M.a.createElement("td",null,n(t)),M.a.createElement("td",null,o(t)))},c=Object.values(t.foods),d=20,m=c.length>d,u=()=>{if(!m)return M.a.createElement("table",{className:"detail-table-wrapper"},M.a.createElement("tbody",null,M.a.createElement("tr",null,M.a.createElement("th",null,"\u83dc\u540d\ud83c\udf56"),M.a.createElement("th",null,"\u6570\u91cf\ud83c\udfb2"),M.a.createElement("th",null,"\u5c0f\u8ba1\ud83d\udcb0")),p(c)));var e=d,t=c.length-e;if(t>e){var a=[t,e];e=a[0],t=a[1]}return M.a.createElement(M.a.Fragment,null,M.a.createElement("table",{className:"detail-table-wrapper half"},M.a.createElement("tbody",null,M.a.createElement("tr",null,M.a.createElement("th",null,"\u83dc\u540d\ud83c\udf56"),M.a.createElement("th",null,"\u6570\u91cf\ud83c\udfb2"),M.a.createElement("th",null,"\u5c0f\u8ba1\ud83d\udcb0")),p(c.slice(0,e)))),M.a.createElement("table",{className:"detail-table-wrapper half"},M.a.createElement("tbody",null,M.a.createElement("tr",null,M.a.createElement("th",null,"\u83dc\u540d\ud83c\udf56"),M.a.createElement("th",null,"\u6570\u91cf\ud83c\udfb2"),M.a.createElement("th",null,"\u5c0f\u8ba1\ud83d\udcb0")),p(c.slice(e)))))},p=e=>N()(e,e=>M.a.createElement(i,{data:e,key:e.label+`${new Date}`}));return M.a.createElement(s["a"],{className:"tableno-detail-modal",closable:!0,maskClosable:!1,visible:a,onClose:l,animationType:"slide-up"},M.a.createElement("div",null,M.a.createElement("div",{className:"header-wrapper"},M.a.createElement("div",{className:"text1"},"\u53f0\u4f4d\uff1a",M.a.createElement("span",{className:"red"},t.label)),M.a.createElement("div",{className:"money-wrapper text1"},"\u603b\u8ba1\uff1a",M.a.createElement(D["a"],{value:t.totalMoney,className:"red"})),Object(S["c"])(t.realMoney)&&M.a.createElement("div",{className:"money-wrapper"},"\u5b9e\u6536\uff1a",M.a.createElement(D["a"],{value:t.realMoney,className:"red"}))),M.a.createElement("div",{style:{display:"flex"}},M.a.createElement(u,null)),M.a.createElement("div",{className:"text1"},"\u65f6\u95f4: ",Object(S["a"])(t.orderTime),"-",Object(S["a"])(+new Date))))},se=e=>{var t=e.curTableData,a=e.onClose,l=e.isShow,n=e.doComfirm,o=void 0===n?()=>{}:n,i=e.inputRef;if(I()(t)||!l)return null;var c=()=>{a&&a()};return M.a.createElement(s["a"],{className:"tableno-paymoney-modal",closable:!0,transparent:!0,visible:l,onClose:c,animationType:"fade",title:"\u7ed3\u8d26",footer:[{text:"\u786e\u8ba4",onPress:o}]},M.a.createElement("div",null,M.a.createElement(r["a"],{ref:i,type:"money",defaultValue:t.totalMoney,clear:!0,moneyKeyboardAlign:"left",moneyKeyboardWrapProps:G},"\u5e94\u6536\u91d1\u989d")))};t["default"]=ae},Dk45:function(e,t,a){},FCkD:function(e,t,a){"use strict";a.r(t);a("ufv1");var r=a("QYgq"),l=(a("DR4Q"),a("gumZ")),n=a("q1tI"),o=a.n(n),s=a("Y3KF"),i=a("MuoO"),c=a("uuYL"),d=a("C3Sm"),m=a("OAf0"),u=(a("Dk45"),function(e,t,a,r){var l,n=arguments.length,o=n<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,a):r;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)o=Reflect.decorate(e,t,a,r);else for(var s=e.length-1;s>=0;s--)(l=e[s])&&(o=(n<3?l(o):n>3?l(t,a,o):l(t,a))||o);return n>3&&o&&Object.defineProperty(t,a,o),o});function p(e){return o.a.createElement(s["Sticky"],null,t=>{var a=t.style;return o.a.createElement("div",{style:Object.assign({},a,{zIndex:1})},o.a.createElement(l["a"].DefaultTabBar,Object.assign({},e)))})}var h=[{title:"\u70b9\u83dc",sub:"1"},{title:"\u53f0\u4f4d",sub:"2"},{title:"\u672a\u4e0a\u83dc",sub:"3"}],b=class extends o.a.Component{render(){return o.a.createElement("div",null,o.a.createElement(s["StickyContainer"],null,o.a.createElement(l["a"],{tabs:h,swipeable:!1,useOnPan:!1,renderTabBar:p,tabBarTextStyle:{height:"0.8rem",fontSize:"0.3rem"},destroyInactiveTab:!0,onTabClick:(e,t)=>this.props.dispatch({type:"home/setHomeTab",payload:{tabIndex:t}}),page:this.props.home.tabIndex},o.a.createElement(c["default"],null),o.a.createElement(d["default"],null),o.a.createElement(m["default"],null))),o.a.createElement(r["a"],null))}};b=u([Object(i["connect"])(e=>{var t=e.home;return{home:t}})],b),t["default"]=b},MEdo:function(e,t,a){},NCsZ:function(e){e.exports=[{label:"\u5fae\u8fa3",value:"1"},{label:"\u4e2d\u8fa3",value:"2"},{label:"\u8d85\u8fa3",value:"3"}]},OAf0:function(e,t,a){"use strict";a.r(t);a("iOla");var r=a("yWu4"),l=(a("Dkba"),a("UYM3")),n=(a("puyI"),a("xZH1")),o=(a("D2jH"),a("2ROE")),s=a("xkGU"),i=a.n(s),c=a("Y+p1"),d=a.n(c),m=a("BJ98"),u=a.n(m),p=a("3EZw"),h=a.n(p),b=a("k4Da"),f=a.n(b),v=(a("JI3C"),a("i79i")),g=a("6ajc"),y=a.n(g),E=a("J2m7"),N=a.n(E),C=a("3WF5"),k=a.n(C),O=(a("e3Tq"),a("n+tp")),I=(a("wpjs"),a("KKYb")),L=(a("B8GA"),a("8dL9")),M=a("0YDr"),j=a.n(M),T=a("E+oP"),D=a.n(T),x=(a("tW3Q"),a("a9LI")),S=a("q1tI"),w=a.n(S),P=a("MuoO"),A=a("0lfv"),R=a("jxKE"),z=(a("31/t"),function(e,t,a,r){var l,n=arguments.length,o=n<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,a):r;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)o=Reflect.decorate(e,t,a,r);else for(var s=e.length-1;s>=0;s--)(l=e[s])&&(o=(n<3?l(o):n>3?l(t,a,o):l(t,a))||o);return n>3&&o&&Object.defineProperty(t,a,o),o}),F=function(e,t){var a={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(a[r]=e[r]);if(null!=e&&"function"===typeof Object.getOwnPropertySymbols){var l=0;for(r=Object.getOwnPropertySymbols(e);l<r.length;l++)t.indexOf(r[l])<0&&(a[r[l]]=e[r[l]])}return a},H=x["a"].CheckboxItem,Q=class extends S["Component"]{constructor(e){super(e),this.handleFoodChange=(e=>{this.setState({food:e})}),this.handleTagChange=((e,t)=>{this.setState({selectedTable:Object.assign({},this.state.selectedTable,{[t]:e})})}),this.onChange=(e=>{console.log("key",e)}),this.renderTablePanel=(e=>{if(D()(e))return null;var t=this.state.food,a=e=>j()(e.map(e=>e.count)),r=t?w.a.createElement("div",null,e.label,w.a.createElement(L["a"],{text:a(e.foods),hot:!0,style:{marginLeft:12}})):e.label;return w.a.createElement(I["a"].Panel,{header:r,key:e.label},w.a.createElement(O["a"],{className:"my-list"},k()(e.foods,e=>w.a.createElement(H,{key:e.value,onChange:()=>this.onChange(e.value)},w.a.createElement("div",{className:"food-item"},w.a.createElement("div",{className:"text"},e.label," * ",e.count),w.a.createElement(L["a"],{text:e.taste?Object(A["i"])(e.taste):"",style:{marginLeft:12,padding:"0 0.03rem",backgroundColor:"#f19736",borderRadius:"0.02rem"}}))))))}),this.renderTableList=(e=>{return e.map(this.renderTablePanel)}),this.tagChange=(e=>{e.tableData;var t=e.foodItem,a=e.selected,r=e.count,l=a?R["c"].checked:R["c"].normal;this.updateLocalOrder({foodValue:t.value,count:r,status:l}),this.props.dispatch({type:"tableno/fetchTableList"})}),this.updateLocalOrder=(e=>{var t=e.foodValue,a=e.count,r=e.status,l=a.id,n=Object(A["b"])(l),o=Object.assign({},n,{orderList:n.orderList.map(e=>e.value===t?Object.assign({},e,{status:r}):e)});Object(A["j"])(o)}),this.updateTableModels=(e=>{var t=e.tableData,a=e.foodValue,r=e.count,l=e.status,n=e=>N()(this.props.tableno.tableList,t=>t.id===e),o=n(t.id),s=r.id,i=Object.assign({},o,{foods:Object.assign({},o.foods,{[a]:Object.assign({},o.foods[a],{count:o.foods[a].count.map(e=>e.id===s?Object.assign({},e,{status:l}):e)})}),orderList:o.orderList.map(e=>e.value===a?Object.assign({},e,{status:l}):e)});this.props.dispatch({type:"tableno/updateTableList",payload:{tableData:i,debug:!0}})}),this.comfirmServing=(e=>{var t=e=>e.status===R["c"].checked,a=e=>e.count.some(t),r=e=>{var a=R["c"].completed,r=e.value;e.count.filter(t).forEach(e=>{this.updateLocalOrder({foodValue:r,count:e,status:a})})};e.filter(a).forEach(r),this.props.dispatch({type:"tableno/fetchTableList"})}),this.renderFoodPanel=((e,t)=>{if(D()(e))return null;var a=this.state.food,r=e=>j()(e.map(e=>j()(e.count.map(e=>e.value)))),l=a?w.a.createElement("div",null,t,w.a.createElement(L["a"],{text:r(e),hot:!0,style:{marginLeft:12}})):t;return w.a.createElement(I["a"],{className:"my-accordion",onChange:this.onChange,defaultActiveKey:t,key:t},w.a.createElement(I["a"].Panel,{header:l,key:t},w.a.createElement(O["a"],{className:"my-list"},k()(e,e=>e.count.map((t,a)=>this.renderCount({tableData:e.tableData,foodItem:e,count:t,idx:a}))),w.a.createElement(B,{isActive:e.some(e=>e.count.some(e=>e.status==R["c"].checked)),style:{bottom:0},onClick:()=>{this.comfirmServing(e)}}))))}),this.renderFoodList=(e=>{if(this.state.isMixMode){var t=this.state.isMixMode?y()(k()(e,e=>e)):[];return this.mixModeRender(t)}return k()(e,this.renderFoodPanel)}),this.mixModeRender=(e=>{if(D()(e))return null;var t=e=>e.count.some(e=>e.status==R["c"].checked),a=e.some(t);return w.a.createElement(w.a.Fragment,null,e.map(e=>e.count.map((t,a)=>this.renderCount({tableData:e.tableData,foodItem:e,count:t,idx:a}))),w.a.createElement(B,{className:"mix-mode-comfirm",isActive:a,style:{bottom:0},onClick:()=>{var t=e.filter(e=>e.count.some(e=>e.status==R["c"].checked));this.comfirmServing(t)}}))}),this.renderCount=(e=>{var t=e.count,a=e.idx,r=e.tableData,l=e.foodItem;return w.a.createElement("div",{className:"food-item",key:`${r.id}-${l.label}-${a}`},w.a.createElement(L["a"],{text:r.isPack?"\u6253\u5305":"",corner:!0},w.a.createElement(v["a"],{selected:t.status==R["c"].checked,onChange:e=>{return this.tagChange({tableData:r,foodItem:l,selected:e,count:t})}},w.a.createElement("div",{className:"text"},r.label,w.a.createElement(L["a"],{text:t.value,style:{marginLeft:12}}),w.a.createElement("span",null,l.label),w.a.createElement(L["a"],{text:l.taste?Object(A["i"])(l.taste):"",style:{marginLeft:12,padding:"0 0.03rem",backgroundColor:"#fff",borderRadius:"0.02rem"}})))))}),this.filter=(e=>{if(D()(e))return e;var t=this.state,a=t.food,r=void 0===a?"":a,l=t.selectedTable,n=void 0===l?{}:l,o=e=>{return D()(n)?e:Object.values(n).every(e=>!e)?e:e.filter(e=>!!n[e.label])},s=e=>{var t=e=>0!=e.count,a=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=arguments.length>1?arguments[1]:void 0;return!e||t.label.indexOf(e)>-1};return e.map(e=>Object.assign({},e,{foods:f()(e.foods,e=>t(e)&&a(r,e))}))},i=e=>{return e.filter(e=>!D()(e.foods))};return i(s(o(e)))}),this.getNotServingTable=(e=>{if(D()(e))return[];var t=e=>e.status!==R["c"].completed,a=e=>k()(e,e=>Object.assign({},e,{count:e.count.filter(t)})),r=e=>!D()(e.count),l=e=>-1!==e.label.indexOf("\u9152"),n=e=>e.map(e=>Object.assign({},e,{foods:f()(a(e.foods),e=>!l(e)&&r(e))})),o=e=>e.filter(e=>!D()(e.foods)),s=(h()((e,t)=>{return console.error(e,t),t}),u()([o,n,o]));return s(e)}),this.state={selectedTable:{},food:"",orderData:[],isMixMode:!0}}componentDidMount(){this.setState({orderData:this.getNotServingTable(this.props.tableno.tableList)})}componentWillReceiveProps(e){d()(this.props.tableno.tableList,e.tableno.tableList)||this.setState({orderData:this.getNotServingTable(e.tableno.tableList)})}render(){var e=document.documentElement.clientHeight,t=this.filter(this.state.orderData),a={};return i()(t,e=>i()(e.foods,t=>{a[t.label]||(a[t.label]=[]),a[t.label].push(Object.assign({},t,{tableData:e}))})),w.a.createElement("div",{className:"home-wrapper notserving bg-light-theme5",style:{minHeight:.9*e}},w.a.createElement("div",{className:"filter-wrapper"},w.a.createElement(o["a"],{type:"ellipsis",size:"md",onClick:()=>this.setState({modal1:!0})}),w.a.createElement(n["a"],{visible:this.state.modal1,transparent:!0,maskClosable:!0,onClose:()=>this.setState({modal1:!1}),title:"\u672a\u4e0a\u83dc\u9875\u9762\u8bbe\u7f6e",footer:[{text:"\u786e\u8ba4",onPress:()=>this.setState({modal1:!1})}],wrapProps:{onTouchStart:A["g"]}},w.a.createElement("div",{style:{overflow:"scroll"}},w.a.createElement(O["a"],null,w.a.createElement(O["a"].Item,{extra:w.a.createElement(l["a"],{checked:this.state.isMixMode,onChange:()=>{this.setState({isMixMode:!this.state.isMixMode})}})},"\u6df7\u5408\u6a21\u5f0f")))),w.a.createElement(r["a"],{placeholder:"\u83dc\u540d\u641c\u7d22",value:this.state.food,onChange:this.handleFoodChange}),w.a.createElement("div",{className:"tag-wrapper"},this.state.orderData.map(e=>w.a.createElement(v["a"],{key:e.label,onChange:t=>this.handleTagChange(t,e.label)},e.label)))),w.a.createElement("div",{className:`not-serving-list-wrapper ${this.state.isMixMode?"mix-mode":""}`},this.renderFoodList(a)))}};Q=z([Object(P["connect"])(e=>{var t=e.tableno;return{tableno:t}})],Q),t["default"]=w.a.memo(Q);var B=e=>{var t=e.isActive,a=void 0!==t&&t,r=e.onClick,l=e.className,n=F(e,["isActive","onClick","className"]),s=e=>{if(e.stopPropagation(),e.preventDefault(),!a)return null;r&&r()};return w.a.createElement("div",Object.assign({className:`comfirm-btn ${a?"active":""} ${l||""}`,onClick:s},n),w.a.createElement(o["a"],{type:"check-circle",size:"lg",color:"#1890ff"}))}},Sth4:function(e,t,a){"use strict";var r=a("q1tI"),l=a.n(r),n=(a("pio6"),function(e,t){var a={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(a[r]=e[r]);if(null!=e&&"function"===typeof Object.getOwnPropertySymbols){var l=0;for(r=Object.getOwnPropertySymbols(e);l<r.length;l++)t.indexOf(r[l])<0&&(a[r[l]]=e[r[l]])}return a}),o=e=>{var t=e.value,a=e.className,r=n(e,["value","className"]);return void 0===t?null:l.a.createElement("div",Object.assign({className:`money ${a||""}`},r),l.a.createElement("span",{className:"money-icon"},"\uffe5"),t)};t["a"]=o},Z5Uu:function(e){e.exports=[{label:"\u62db1",value:"\u62db1"},{label:"\u62db2",value:"\u62db2"},{label:"\u62db3",value:"\u62db3"},{label:"\u836f1",value:"\u836f1"},{label:"\u836f2",value:"\u836f2"},{label:"\u836f3",value:"\u836f3"},{label:"+1",value:"+1"},{label:"+2",value:"+2"},{label:"+3",value:"+3"},{label:"+4",value:"+4"},{label:"+5",value:"+5"},{label:"+6",value:"+6"},{label:"+7",value:"+7"},{label:"+8",value:"+8"},{label:"+9",value:"+9"},{label:"\u4e2d",value:"\u4e2d"},{label:"\u9648\u5e08\u5085",value:"\u9648\u5e08\u5085"},{label:"\u79cd\u5b50\u5e97",value:"\u79cd\u5b50\u5e97"},{label:"\u836f\u95e8",value:"\u836f\u95e8"},{label:"\u6c99\u53bf",value:"\u6c99\u53bf"}]},dtKn:function(e,t){e.exports="data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBzdGFuZGFsb25lPSJubyI/PjwhRE9DVFlQRSBzdmcgUFVCTElDICItLy9XM0MvL0RURCBTVkcgMS4xLy9FTiIgImh0dHA6Ly93d3cudzMub3JnL0dyYXBoaWNzL1NWRy8xLjEvRFREL3N2ZzExLmR0ZCI+PHN2ZyBjbGFzcz0iaWNvbiIgd2lkdGg9IjIwMHB4IiBoZWlnaHQ9IjIwMC4wMHB4IiB2aWV3Qm94PSIwIDAgMTAyNCAxMDI0IiB2ZXJzaW9uPSIxLjEiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyI+PHBhdGggZmlsbD0iIzEyOTZkYiIgZD0iTTUxMiA2NEMyNjQuNiA2NCA2NCAyNjQuNiA2NCA1MTJzMjAwLjYgNDQ4IDQ0OCA0NDggNDQ4LTIwMC42IDQ0OC00NDhTNzU5LjQgNjQgNTEyIDY0eiBtMTkyIDQ3MmMwIDQuNC0zLjYgOC04IDhINTQ0djE1MmMwIDQuNC0zLjYgOC04IDhoLTQ4Yy00LjQgMC04LTMuNi04LThWNTQ0SDMyOGMtNC40IDAtOC0zLjYtOC04di00OGMwLTQuNCAzLjYtOCA4LThoMTUyVjMyOGMwLTQuNCAzLjYtOCA4LThoNDhjNC40IDAgOCAzLjYgOCA4djE1MmgxNTJjNC40IDAgOCAzLjYgOCA4djQ4eiIgLz48L3N2Zz4="},eNPU:function(e,t,a){},g0q0:function(e,t,a){"use strict";a.d(t,"a",function(){return l});var r=a("Z5Uu"),l=()=>{return r}},jasq:function(e,t){e.exports="data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBzdGFuZGFsb25lPSJubyI/PjwhRE9DVFlQRSBzdmcgUFVCTElDICItLy9XM0MvL0RURCBTVkcgMS4xLy9FTiIgImh0dHA6Ly93d3cudzMub3JnL0dyYXBoaWNzL1NWRy8xLjEvRFREL3N2ZzExLmR0ZCI+PHN2ZyBjbGFzcz0iaWNvbiIgd2lkdGg9IjIwMHB4IiBoZWlnaHQ9IjIwMC4wMHB4IiB2aWV3Qm94PSIwIDAgMTAyNCAxMDI0IiB2ZXJzaW9uPSIxLjEiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyI+PHBhdGggZmlsbD0iIzEyOTZkYiIgZD0iTTUxMiA2NEMyNjQuNiA2NCA2NCAyNjQuNiA2NCA1MTJzMjAwLjYgNDQ4IDQ0OCA0NDggNDQ4LTIwMC42IDQ0OC00NDhTNzU5LjQgNjQgNTEyIDY0eiBtMTkyIDQ3MmMwIDQuNC0zLjYgOC04IDhIMzI4Yy00LjQgMC04LTMuNi04LTh2LTQ4YzAtNC40IDMuNi04IDgtOGgzNjhjNC40IDAgOCAzLjYgOCA4djQ4eiIgLz48L3N2Zz4="},jxKE:function(e,t,a){"use strict";var r;a.d(t,"e",function(){return c}),a.d(t,"b",function(){return l}),a.d(t,"d",function(){return n}),a.d(t,"c",function(){return o}),a.d(t,"g",function(){return s}),a.d(t,"f",function(){return i}),a.d(t,"a",function(){return d}),function(e){e[e["\u5fae\u8fa3"]=0]="\u5fae\u8fa3",e[e["\u4e2d\u8fa3"]=1]="\u4e2d\u8fa3",e[e["\u8d85\u8fa3"]=2]="\u8d85\u8fa3"}(r||(r={}));var l,n,o,s,i,c={bookingOrder:"booking/order",bookingMenuList:"booking/menuList"};(function(e){e[e["booking"]=0]="booking",e[e["tableNo"]=1]="tableNo"})(l||(l={})),function(e){e[e["booking"]=0]="booking",e[e["tableNo"]=1]="tableNo",e[e["notServing"]=2]="notServing"}(n||(n={})),function(e){e[e["normal"]=0]="normal",e[e["checked"]=1]="checked",e[e["completed"]=2]="completed"}(o||(o={})),function(e){e[e["normal"]=0]="normal",e[e["paid"]=1]="paid"}(s||(s={})),function(e){e[e["incre"]=0]="incre",e[e["decre"]=1]="decre",e[e["disable"]=2]="disable"}(i||(i={}));var d=""},mhwC:function(e,t,a){},pio6:function(e,t,a){},tmn2:function(e,t,a){"use strict";a("B8GA");var r=a("8dL9"),l=(a("oByq"),a("Wx4G")),n=a("q1tI"),o=a.n(n),s=(a("4AHY"),e=>{var t=e.tableListWithPeople,a=e.tableListWithStatic,n=e.onClick,s=e.currentTableNo,i=e.disable,c=void 0!==i&&i,d=t.filter(e=>e.tableNo).map(e=>e.tableNo),m=e=>d.includes(e),u=e=>c&&m(e.value),p=e=>{u(e)||n&&n(e)},h=e=>u(e)?"bg-gray4 disabled":"";return o.a.createElement(l["a"],{className:"table-selector-grid",square:!1,data:a,columnNum:5,hasLine:!1,renderItem:e=>o.a.createElement("div",{className:`table-selector-item ${s===e.value?"active":""} ${h(e)}`,onClick:()=>p(e)},o.a.createElement("span",null,e.label),m(e.value)&&o.a.createElement(r["a"],{text:"\u4eba",className:"table-selector-badge"}))})});t["a"]=s},ufuw:function(e,t,a){},uuYL:function(e,t,a){"use strict";a.r(t);a("oByq");var r=a("Wx4G"),l=(a("B8GA"),a("8dL9")),n=(a("puyI"),a("xZH1")),o=(a("XGli"),a("NHyu")),s=(a("ufv1"),a("QYgq")),i=(a("XCdk"),a("b+ud")),c=(a("Dkba"),a("UYM3")),d=(a("e3Tq"),a("n+tp")),m=a("6ajc"),u=a.n(m),p=a("mwIZ"),h=a.n(p),b=(a("HVTF"),a("OT5E")),f=a("E+oP"),v=a.n(f),g=a("0YDr"),y=a.n(g),E=a("UfWW"),N=a.n(E),C=a("J2m7"),k=a.n(C),O=a("q1tI"),I=a.n(O),L=a("MuoO"),M=(a("3R4e"),a("Sth4")),j=a("BSQ0"),T=e=>{var t=e.data||{};if(!t)return null;var a=t.count,r=void 0===a?0:a,l=0!==r,n=()=>{e.onClick&&e.onClick(t)};return I.a.createElement("div",{className:`card-wrapper ${l?"has-count bg-light-theme5":""}`,onClick:n},I.a.createElement("div",{className:"card-right"},I.a.createElement("h3",{className:"card-title"},t.label),I.a.createElement("div",{className:"money-wrapper"},I.a.createElement("div",{className:"btn-group-wrapper"},l&&I.a.createElement("span",{className:"count"},t.count)),I.a.createElement(M["a"],{value:t.price,className:"red"}))))},D=I.a.memo(Object(j["default"])(T)),x=a("tmn2"),S=a("zPXH"),w=a("g0q0"),P=a("0lfv"),A=a("jxKE"),R=function(e,t,a,r){var l,n=arguments.length,o=n<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,a):r;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)o=Reflect.decorate(e,t,a,r);else for(var s=e.length-1;s>=0;s--)(l=e[s])&&(o=(n<3?l(o):n>3?l(t,a,o):l(t,a))||o);return n>3&&o&&Object.defineProperty(t,a,o),o},z=Object(w["a"])(),F=a("NCsZ"),H=class extends O["Component"]{constructor(e){super(e),this.increFood=(e=>{return this.props.dispatch({type:"booking/increFood",payload:{food:e}}),!0}),this.decreFood=(e=>{return!!e.count&&(this.props.dispatch({type:"booking/decreFood",payload:{food:e}}),!0)}),this.setOrderInfo=(e=>{this.props.dispatch({type:"booking/setOrderInfo",payload:e})}),this.merge=((e,t)=>{var a=[...e],r=(e,t)=>k()(e,e=>e.value===t.menuType),l=(e,t)=>{var a=N()(e.children,e=>e.value===t.value);-1!==a&&(e.children[a]=t)};return t.forEach(t=>l(r(e,t),t)),a}),this.onOpenChange=(()=>this.setState({open:!this.state.open})),this.getTotalMoney=(e=>{return y()(e.map(e=>e.price*e.count))}),this.submit=(()=>{var e=this.props.booking.order,t=e.list,a=e.tableNo,r=e.isPack,l=e.taste,n=t.filter(e=>e.count),o=[{errorMsg:"\u8bf7\u9009\u62e9\u53f0\u4f4d",isError:e=>!e.tableNo},{errorMsg:"\u60a8\u8fd8\u6ca1\u70b9\u83dc\u5662\uff01",isError:e=>v()(e.list.filter(e=>e.count))}],s=o.some(t=>{var a=t.isError(e);return a&&b["a"].fail(t.errorMsg,1),a});if(!s){this.setOrderInfo({foodSelectModal:!1});var i=this.getTotalMoney(n),c=Object(P["f"])(),d={id:c,orderList:n,isPack:r,taste:l,tableNo:a,remark:e.remark,totalMoney:i,orderTime:(new Date).getTime(),from:A["b"].booking};console.error("\u4e0b\u5355\u53c2\u6570params",d),Object(P["h"])(d),this.props.dispatch({type:"booking/reset"}),this.props.dispatch({type:"tableno/fetchTableList"}),this.props.dispatch({type:"home/setHomeTab",payload:{tabIndex:A["d"].tableNo}}),this.setSelectIdx(d)}}),this.setSelectIdx=(e=>{var t=N()(this.props.tableno.tableList,t=>{var a=h()(t,"tableNo","");return a===e.tableNo});-1!==t&&this.props.dispatch({type:"tableno/setSelectIdx",payload:{seletedIdx:t}})}),this.isDisabled=(()=>{var e=this.props.booking.order;return!e.tableNo}),this.state={open:!0}}componentDidMount(){this.props.dispatch({type:"booking/getMenuList"})}render(){var e=this.props.booking,t=e.menuList,a=e.order,m=a.list,p=a.tableNo,h=a.isPack,b=a.taste,f=a.remark,g=a.foodSelectModal,y=a.isIncre,E=this.merge(t,m),N=e=>u()(e.map(e=>e.children)),C=this.getTotalMoney(m),k=document.documentElement.clientHeight,O=y?this.increFood:this.decreFood;return I.a.createElement("div",{className:"home-wrapper bg-light-theme1",style:{minHeight:.9*k}},I.a.createElement("div",{className:"home-right",style:{minHeight:k}},I.a.createElement(d["a"],null,I.a.createElement(d["a"].Item,{extra:p||"\u8bf7\u9009\u62e9"},"\u53f0\u4f4d\u9009\u62e9"),I.a.createElement(x["a"],{currentTableNo:p,tableListWithStatic:z,tableListWithPeople:this.props.tableno.tableList,onClick:e=>this.setOrderInfo({tableNo:e.value})}),I.a.createElement(d["a"].Item,{extra:I.a.createElement(c["a"],{checked:h,onChange:e=>this.setOrderInfo({isPack:e})})},"\u6253\u5305"),I.a.createElement(d["a"].Item,null,I.a.createElement(S["a"],{tasteList:F,currentTaste:b,onClick:e=>this.setOrderInfo({taste:b===e.value?"":e.value})})),I.a.createElement(i["a"],{onChange:e=>this.setOrderInfo({remark:e}),title:"\u5907\u6ce8",clear:!0,autoHeight:!0,placeholder:"\u8bf7\u8f93\u5165\u5907\u6ce8",value:f})),I.a.createElement(s["a"],{size:"lg"}),I.a.createElement(o["a"],{type:"primary",onClick:()=>{this.setOrderInfo({foodSelectModal:!0,isIncre:!0})},disabled:this.isDisabled()},"\u70b9\u83dc"),I.a.createElement("div",{className:"food-selector-wrapper"},I.a.createElement(n["a"],{className:"food-selector-modal",popup:!0,closable:!0,maskClosable:!0,visible:g,onClose:()=>this.setOrderInfo({foodSelectModal:!1}),animationType:"slide-up"},I.a.createElement("div",{className:"text1 food-selector-header"},I.a.createElement(o["a"],{className:"reset-btn",type:"ghost",inline:!0,size:"small",onClick:()=>{this.setOrderInfo({list:[]}),this.props.dispatch({type:"booking/initMenuList",payload:{menuList:Object(P["e"])(A["e"].bookingMenuList)}})}},"\u6e05\u7a7a"),p,I.a.createElement(l["a"],{text:b?Object(P["i"])(b):"",style:{marginLeft:12,padding:"0 0.03rem",backgroundColor:"#f19736",borderRadius:"0.02rem"}}),I.a.createElement(l["a"],{text:h?"\u6253\u5305":"",style:{marginLeft:12,padding:"0 0.03rem",backgroundColor:"#4dd865",borderRadius:"0.02rem"}}),f?`(${f})`:""),I.a.createElement(r["a"],{data:N(E),columnNum:5,hasLine:!1,square:!1,activeClassName:"bg-light-theme5",renderItem:(e,t)=>I.a.createElement(D,{data:e,key:t,onClick:O,onLongPress:()=>O(e)})}),I.a.createElement("div",{className:"food-selector-footer"},I.a.createElement(o["a"],{type:y?"ghost":"warning",inline:!0,size:"small",onClick:()=>this.setOrderInfo({isIncre:!y}),disabled:v()(m)},"\u6539\u5355",y?"(+)":"(-)"),I.a.createElement(o["a"],{type:"primary",inline:!0,onClick:this.submit,disabled:v()(m)},"\u4e0b\u5355"),I.a.createElement("div",{className:"total-money-wrapper"},I.a.createElement("div",null,"\u603b\u8ba1"),I.a.createElement(M["a"],{value:C,className:"red"})))))))}};H=R([Object(L["connect"])(e=>{var t=e.booking,a=e.tableno,r=e.home;return{booking:t,tableno:a,home:r}})],H);t["default"]=H},zPXH:function(e,t,a){"use strict";var r=a("q1tI"),l=a.n(r),n=a("0lfv"),o=(a("8It1"),e=>{var t=e.tasteList,a=e.currentTaste,r=e.onClick,o=e=>{r&&r(e)};return l.a.createElement("div",{className:"taste-wrapper"},l.a.createElement("span",{className:"taste-text"},"\u53e3\u5473"),t.map(e=>l.a.createElement("div",{key:e.value,className:`taste-item  ${e.value===a?"bg-deep-theme8":"bg-gray4"}`,onClick:()=>o(e)},Object(n["i"])(e.value))))});t["a"]=o}}]);